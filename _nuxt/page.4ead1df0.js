import{ax as d,X as K,d as R,b0 as _,bf as x,ca as k,r as j,aD as p,cb as O,cc as S,k as T,cd as h,ce as C,cf as w,$ as N,aQ as B,T as H,cg as I}from"./entry.4b9f1d2d.js";const L=(e,a)=>a.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,t=>{var n;return((n=e.params[t.slice(1)])==null?void 0:n.toString())||""}),f=(e,a)=>{const t=e.route.matched.find(i=>{var r;return((r=i.components)==null?void 0:r.default)===e.Component.type}),n=a??(t==null?void 0:t.meta.key)??(t&&L(e.route,t));return typeof n=="function"?n(e.route):n},$=(e,a)=>({default:()=>e?d(K,e===!0?{}:e,a):a}),q=R({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const a=e.renderKey,t=e.route,n={};for(const i in e.route)Object.defineProperty(n,i,{get:()=>a===e.renderKey?e.route[i]:t[i]});return _(k,x(n)),()=>d(e.vnode,{ref:e.vnodeRef})}}),X=R({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:a,expose:t}){const n=T(),i=j(),r=p(k,null);t({pageRef:i});const c=p(O,null);let u;const s=n.deferHydration();return()=>d(S,{name:e.name,route:e.route,...a},{default:o=>{const b=D(r,o.route,o.Component),m=r&&r.matched.length===o.route.matched.length;if(!o.Component){if(u&&!m)return u;s();return}if(u&&c&&!c.isCurrent(o.route))return u;if(b&&r&&(!c||c!=null&&c.isCurrent(r)))return m?u:null;const y=f(o,e.pageKey),l=!!(e.transition??o.route.meta.pageTransition??h),A=l&&V([e.transition,o.route.meta.pageTransition,h,{onAfterLeave:()=>{n.callHook("page:transition:finish",o.Component)}}].filter(Boolean)),g=e.keepalive??o.route.meta.keepalive??C;return u=w(H,l&&A,$(g,d(N,{suspensible:!0,onPending:()=>n.callHook("page:start",o.Component),onResolve:()=>{B(()=>n.callHook("page:finish",o.Component).finally(s))}},{default:()=>{const v=d(q,{key:y||void 0,vnode:o.Component,route:o.route,renderKey:y||void 0,trackRootNodes:l,vnodeRef:i});return g&&(v.type.name=o.Component.type.name||o.Component.type.__name||"RouteProvider"),v}}))).default(),u}})}});function F(e){return Array.isArray(e)?e:e?[e]:[]}function V(e){const a=e.map(t=>({...t,onAfterLeave:F(t.onAfterLeave)}));return I(...a)}function D(e,a,t){if(!e)return!1;const n=a.matched.findIndex(i=>{var r;return((r=i.components)==null?void 0:r.default)===(t==null?void 0:t.type)});return!n||n===-1?!1:a.matched.slice(0,n).some((i,r)=>{var c,u,s;return((c=i.components)==null?void 0:c.default)!==((s=(u=e.matched[r])==null?void 0:u.components)==null?void 0:s.default)})||t&&f({route:a,Component:t})!==f({route:e,Component:t})}export{X as _};
