import{_ as N}from"./BaseHeadline.vue.05c39882.js";import{_ as q}from"./MusicTeaser.vue.7c4d82c3.js";import{_ as B}from"./nuxt-link.5cabacf9.js";import R from"./ContentNavigation.64ede999.js";import{_ as T}from"./BaseContainer.66ad609f.js";import{d as k,b as o,c as n,F as C,M as v,D as u,e as _,t as z,r as m,L as E,I as y,v as I,J as S,g as c,w as h,n as V,f as F,s as w,N as H,O as J}from"./entry.4b9f1d2d.js";import"./asyncData.8b579911.js";const j=["Ambient","Ambient Dub","Ambient Techno","Art Rock","Chamber Pop","Chillout","Choral","Dark Ambient","Dark Jazz","Downtempo","Dream Pop","Drone","Dub","Electronic","Experimental Rock","Glitch","IDM","Illbient","Microhouse","Minimal Techno","Minimalism","Modern Classical","Novo Dub","Post-Industrial","Post-Rock","Tape Music","Trip Hop","Video Game Music"],O={class:"flex flex-wrap gap-2"},U=["onClick"],K={class:"genre bg-gray-90 text-gray-20 text-xs p-2 rounded-md line-clamp-1 bottom-0"},Q=k({__name:"MusicGenres",emits:["select-genre"],setup(D,{emit:a}){const l=a;function d(t,r){document.querySelectorAll(".genre").forEach(e=>{e.classList.remove("bg-text"),e.classList.remove("dark:text-gray-90")}),t.target.classList.contains("bg-text")?(t.target.classList.remove("bg-text"),t.target.classList.remove("dark:text-gray-90")):(t.target.classList.add("bg-text"),t.target.classList.add("dark:text-gray-90")),l("select-genre",r)}return(t,r)=>(o(),n("div",O,[(o(!0),n(C,null,v(u(j),e=>(o(),n("div",{onClick:p=>d(p,e),class:"cursor-pointer",key:`genre-${e}`},[_("span",K,z(e),1)],8,U))),128))]))}}),W={class:"flex justify-between"},X={class:"mb-8"},Y={key:0},re=k({__name:"index",async setup(D){let a,l;const d=m({where:[{type:"album"}],limit:20,sort:[{date:-1}]}),t=m("Ambient"),r=m([]);r.value=([a,l]=E(()=>w("albums").find()),a=await a,l(),a||[]),y(t,async s=>{await b(s)});const e=I();y(()=>e.fullPath,async()=>{console.log("route changed",e),await b(e.query.genre)},{immediate:!1});function p(s){t.value=s}async function b(s){if(r.value=await w("albums").where({genres:{$contains:s}}).find()||[],!window)return;const i=new URL(window==null?void 0:window.location.href);i.searchParams.set("genre",s),window==null||window.history.pushState({},"",i)}const x=m(4),L=S(()=>x.value?`grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-${x.value}`:"grid-cols-2 lg:grid-cols-3");return(s,i)=>{const A=N,M=q,$=B,P=R,G=T;return o(),n("main",null,[c(G,null,{default:h(()=>[_("div",W,[c(A,{type:"h1",element:"h1",class:"mb-8",text:"Albums"})]),_("div",X,[c(Q,{onSelectGenre:i[0]||(i[0]=g=>p(g))})]),c(P,{query:u(d)},{default:h(({navigation:g})=>[g?(o(),n("div",Y,[_("ul",{class:V(["grid gap-8",u(L)])},[(o(!0),n(C,null,v(u(r),f=>(o(),n("li",{key:f._path},[c($,{to:f._path},{default:h(()=>[c(M,H(J(f)),null,16)]),_:2},1032,["to"])]))),128))],2)])):F("",!0)]),_:1},8,["query"])]),_:1})])}}});export{re as default};
