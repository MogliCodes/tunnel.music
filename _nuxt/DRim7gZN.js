import{_ as $}from"./BgeJGWjc.js";import X from"./BPj9tZtz.js";import{d as j,P as Z,Q as K,b,c as E,e as _,g as d,w as g,j as C,D as w,f as D,t as ee,bf as P,r as m,o as A,aY as te,aD as ne,b5 as oe,aC as V,I as F,bO as se,J as R,bY as re,n as W,S as ae}from"./CpQxOTvn.js";import{_ as ie}from"./nIdWATdR.js";import{_ as I}from"./DlAUqK2U.js";import{_ as ce}from"./BIirIgjr.js";import{_ as le}from"./dZlz_c1h.js";import{u as ue}from"./DZMs1KXI.js";import"./BQkc-AXV.js";const de={class:"flex gap-6"},pe={class:"inline-block"},_e={class:"inline-block"},fe={key:0,class:"flex items-center gap-2"},me=_("span",{class:"font-bold"},null,-1),he={class:"relative group"},ge={key:0,class:"cursor-pointer block w-8 h-8 rounded-full overflow-hidden"},ve=["src"],xe={class:"opacity-0 text-xs group-hover:opacity-100 bg-gray-90 text-gray-20 rounded-md gap-4 absolute -bottom-2 right-0 translate-y-full bottom-0 z-50 flex flex-col"},ye=_("span",null,"Settings",-1),we={class:"px-6 pb-4 flex gap-2 items-center"},be=j({__name:"AppNavigation",setup(n){const t=Z(),o=K(),s=async()=>{const{error:e}=await o.auth.signOut();e&&console.log(e)};return(e,l)=>{const a=$,u=X,p=$;return b(),E("div",de,[_("nav",null,[_("ul",null,[_("li",pe,[d(a,{"active-class":"dark:bg-text dark:text-gray-90",class:"block rounded-md mr-2 inline-block dark:bg-gray-90 text-gray-20 px-4 py-2 text-sm",to:"/albums"},{default:g(()=>[C("albums")]),_:1})]),_("li",_e,[d(a,{"active-class":"dark:bg-text dark:text-gray-90",class:"block rounded-md mr-2 inline-block dark:bg-gray-90 text-gray-20 px-4 py-2 text-sm",to:"/playlists"},{default:g(()=>[C("playlists")]),_:1})])])]),w(t)?(b(),E("div",fe,[me,_("div",he,[w(t).user_metadata.avatar_url?(b(),E("div",ge,[_("img",{src:w(t).user_metadata.avatar_url,alt:""},null,8,ve)])):D("",!0),_("div",xe,[d(p,{to:"/profile",class:"px-6 pt-4 flex gap-2 items-center whitespace-nowrap"},{default:g(()=>[d(u,{class:"w-4 h-4",name:"heroicons-outline:user",color:"gray"}),_("span",null,ee(w(t).user_metadata.full_name),1)]),_:1}),d(p,{to:"/settings",class:"border-b px-6 pb-4 flex gap-2 items-center"},{default:g(()=>[d(u,{class:"w-4 h-4",name:"heroicons-outline:cog",color:"gray"}),ye]),_:1}),_("div",we,[d(u,{class:"w-4 h-4",name:"heroicons-outline:logout",color:"gray"}),_("button",{class:"cursor-pointer",onClick:s},"Logout")])])])])):D("",!0)])}}}),Ee={},ke={class:"py-4"};function ze(n,t){const o=$,s=be,e=ie;return b(),E("header",ke,[d(e,{class:"flex items-center justify-between"},{default:g(()=>[_("h1",null,[d(o,{class:"font-bold",to:"/"},{default:g(()=>[C("tunnel.music")]),_:1})]),d(s)]),_:1})])}const Se=I(Ee,[["render",ze]]),Ce={},He={class:"container mx-auto"};function Me(n,t){return b(),E("div",He,[P(n.$slots,"default")])}const G=I(Ce,[["render",Me]]),Te={},$e={class:"py-4"},Re=_("p",{class:"font-sans text-xs text-gray-90 text-center"},[C(" Created with <3 by "),_("a",{target:"_blank",href:"https://www.moglicodes.dev/"},"moglicodes.dev")],-1);function Ae(n,t){const o=G;return b(),E("footer",$e,[d(o,null,{default:g(()=>[Re]),_:1})])}const Ie=I(Te,[["render",Ae]]),Le={ref:"scene",id:"scene"},Be={__name:"AppBackground",setup(n){return setTimeout(()=>{var t,o,s,e,l=window.innerWidth,a=window.innerHeight,u=.05,p=0,f=[329227,790037,1250589,1776932,2237740,2698547,329227,790037,1250589,1776932,2237740,2698547],r={position:{z:0}},i={position:{z:0}},x=5,y=24;function z(){const v=m(null),c=document.getElementById("scene");console.log("el",c),console.log("scene",v),t=new THREE.WebGLRenderer({canvas:document.getElementById("scene"),antialias:!0}),t.setSize(l,a),o=new THREE.Scene,o.fog=new THREE.Fog(0,300,700),s=new THREE.PerspectiveCamera(50,l/a,.1,1e4),s.position.set(0,0,-200),o.add(s),window.addEventListener("resize",H),M()}var H=function(){l=window.innerWidth,a=window.innerHeight,s.aspect=l/a,s.updateProjectionMatrix(),t.setSize(l,a)},M=function(){e=new THREE.Object3D,o.add(e);for(var v=0;v<100;v++)T();N()},S=function(v){if(v)for(var c=0,h=e.children.length;c<h;c++)e.children[c]===i&&e.remove(e.children[c]);else for(var c=0,h=e.children.length;c<h;c++)e.children[c]===r&&e.remove(e.children[c])},T=function(v){var c=new THREE.Object3D;v?c.degreesRotation=r.degreesRotation-1||0:c.degreesRotation=i.degreesRotation+1||0;for(var h=0;h<12;h++){var Q=new THREE.MeshBasicMaterial({color:f[h]}),q=new THREE.CircleGeometry(x,y),O=new THREE.Mesh(q,Q),J=new THREE.Matrix4().makeTranslation(80,0,0),U=new THREE.Matrix4().makeRotationZ(Math.PI*2/12*h+c.degreesRotation*.3);O.applyMatrix(new THREE.Matrix4().multiplyMatrices(U,J)),c.add(O)}v?c.position.z=(r.position.z/35+1)*35:c.position.z=(i.position.z/35-1)*35,e.add(c),r=e.children[0],i=e.children[0];for(var k=0,h=e.children.length;k<h;k++)e.children[k].position.z>r.position.z&&(r=e.children[k]),e.children[k].position.z<i.position.z&&(i=e.children[k])},N=function(){requestAnimationFrame(N),s.position.z-=u,s.position.x+=(p-s.position.x)*.08,s.position.z<r.position.z-35&&u>0?(S(!1),T()):s.position.z>i.position.z+665&&u<0&&(S(!0),T(!0)),t.render(o,s)};z()},500),(t,o)=>(b(),E("canvas",Le,null,512))}},Ne=Be;function Y(n){return ne()?(oe(n),!0):!1}function L(n){return typeof n=="function"?n():w(n)}const Oe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const De=Object.prototype.toString,We=n=>De.call(n)==="[object Object]",je=()=>{};function Pe(n){return n||V()}function Ve(n,t=!0,o){Pe()?A(n,o):t?n():te(n)}function Fe(n){var t;const o=L(n);return(t=o==null?void 0:o.$el)!=null?t:o}const B=Oe?window:void 0;function Ge(...n){let t,o,s,e;if(typeof n[0]=="string"||Array.isArray(n[0])?([o,s,e]=n,t=B):[t,o,s,e]=n,!t)return je;Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);const l=[],a=()=>{l.forEach(r=>r()),l.length=0},u=(r,i,x,y)=>(r.addEventListener(i,x,y),()=>r.removeEventListener(i,x,y)),p=F(()=>[Fe(t),L(e)],([r,i])=>{if(a(),!r)return;const x=We(i)?{...i}:i;l.push(...o.flatMap(y=>s.map(z=>u(r,y,z,x))))},{immediate:!0,flush:"post"}),f=()=>{p(),a()};return Y(f),f}function Ye(){const n=m(!1),t=V();return t&&A(()=>{n.value=!0},t),n}function Qe(n){const t=Ye();return R(()=>(t.value,!!n()))}function qe(n,t={}){const{window:o=B}=t,s=Qe(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let e;const l=m(!1),a=f=>{l.value=f.matches},u=()=>{e&&("removeEventListener"in e?e.removeEventListener("change",a):e.removeListener(a))},p=se(()=>{s.value&&(u(),e=o.matchMedia(L(n)),"addEventListener"in e?e.addEventListener("change",a):e.addListener(a),l.value=e.matches)});return Y(()=>{p(),u(),e=void 0}),l}function Je(n={}){const{window:t=B,initialWidth:o=Number.POSITIVE_INFINITY,initialHeight:s=Number.POSITIVE_INFINITY,listenOrientation:e=!0,includeScrollbar:l=!0}=n,a=m(o),u=m(s),p=()=>{t&&(l?(a.value=t.innerWidth,u.value=t.innerHeight):(a.value=t.document.documentElement.clientWidth,u.value=t.document.documentElement.clientHeight))};if(p(),Ve(p),Ge("resize",p,{passive:!0}),e){const f=qe("(orientation: portrait)");F(f,()=>p())}return{width:a,height:u}}const Ue=re("app",()=>{const n=m(!1);function t(o){n.value=o}return{tunnelMode:n,setTunnelMode:t}}),Xe={class:"min-h-screen dark:bg-background dark:text-text"},it=j({__name:"default",setup(n){ue({titleTemplate:r=>r?`${r} - tunnel.music`:"tunnel.music"});const{height:t}=Je(),o=Ue(),s=m(null),e=m(null),l=m(null),a=R(()=>{var r,i;return(i=(r=s==null?void 0:s.value)==null?void 0:r.$el)==null?void 0:i.clientHeight}),u=R(()=>{var r,i;return(i=(r=e==null?void 0:e.value)==null?void 0:r.$el)==null?void 0:i.clientHeight}),p=m(0),f=m("");return A(()=>{p.value=t.value-(a.value+u.value),f.value=`min-height: ${p.value}px;`}),(r,i)=>{const x=Se,y=ce,z=G,H=Ie,M=Ne,S=le;return b(),E("div",Xe,[d(x,{class:"relative z-30",ref_key:"appHeader",ref:s},null,512),d(z,{class:W([w(o).tunnelMode?"tunnel-mode":"","transition-all duration-500 relative z-20 py-24"]),ref_key:"appContainer",ref:l,style:ae(w(f))},{default:g(()=>[d(y,null,{default:g(()=>[P(r.$slots,"default")]),_:3})]),_:3},8,["class","style"]),d(H,{class:"relative z-20",ref_key:"appFooter",ref:e},null,512),d(S,null,{default:g(()=>[d(M,{class:W(["z-10 opacity-80 transition-all duration-1000",w(o).tunnelMode?"":"blur-md"])},null,8,["class"])]),_:1})])}}});export{it as default};
